# Group-Geetest-Verify
入群验证码插件，使用极验Geetest V4验证，有效防止机器人入群。

# 前置条件
1. 一台有公网IP的服务器
2. 一个不要钱的域名，用来托管验证后端服务
3. 安装了PHP 8.4的服务器，可使用[宝塔面板](https://www.bt.cn/)按照文档安装

# 部署后端
请查看[安装步骤](https://github.com/VanillaNahida/group-verify-service#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4)

# 使用方法
1. 在插件市场搜索插件 `astrbot_plugin_group_geetest_verify` 或 `入群网页验证插件`
2. 安装插件
3. 配置插件
    1. 登录极验Geetest官网，注册账号并创建一个新的Geetest V4项目
    2. 按照[文档](https://github.com/VanillaNahida/group-verify-service#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4)部署验证后端服务，按照文档配置好Geetest的ID和Key并启动。
    4. 在插件配置中填写验证后端服务的相关信息，包括`验证后端地址`、`API Key`等（API Key不会自动生成，请自行填写）
    4. 配置入群验证的相关参数，如验证超时时间、验证失败后的操作等。
4. 重载机器人配置，使插件生效。

# 命令

| 命令 | 用法 | 权限要求 | 说明 |
|------|------|----------|------|
| `/重新验证` | `/重新验证 @用户` 或 `/重新验证 从未发言的人` | 群主/管理员 | 强制指定用户重新验证。可以@单个用户，或使用"从未发言的人"为所有未验证且未发言的用户启动验证 |
| `/绕过验证` | `/绕过验证 @用户` | 群主/管理员 | 让指定用户绕过验证，该用户入群时将不再需要验证 |
| `/开启验证` | `/开启验证` | 群主/管理员 | 开启当前群的入群验证功能 |
| `/关闭验证` | `/关闭验证` | 群主/管理员 | 关闭当前群的入群验证功能 |
| `/设置验证超时时间` | `/设置验证超时时间 秒数` | 群主/管理员 | 设置验证超时时间（秒），超时未验证的用户将被踢出群 |

# bug反馈
如果在使用过程中遇到任何问题，请通过以下方式反馈：
- [Issue](https://github.com/VanillaNahida/Group-Geetest-Verify/issues)
- QQ群：195260107